

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="闪聚支付是个什么样的项目？项目背景 随着移动支付的盛行，商业银行、第三方支付公司、其它清算机构、消费金融公司等众多类型的机构，都在为商户提供网络（移动）支付解决方案。另一方面，用户的支付需求繁多，支付渠道已呈“碎片化”状态，并且“碎片化”程度将逐渐加深。聚合支付顾名思义就是将目前主流的支付进行整合，形成第三方支付的聚合通道，也被称为“第四方支付”。 下图是聚合支付的产业结构：  聚合支付不进行资金">
<meta property="og:type" content="article">
<meta property="og:title" content="闪聚支付项目-项目总结">
<meta property="og:url" content="http://example.com/2022/05/08/%E9%97%AA%E8%81%9A%E6%94%AF%E4%BB%98%E9%A1%B9%E7%9B%AE-%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="JavaLife">
<meta property="og:description" content="闪聚支付是个什么样的项目？项目背景 随着移动支付的盛行，商业银行、第三方支付公司、其它清算机构、消费金融公司等众多类型的机构，都在为商户提供网络（移动）支付解决方案。另一方面，用户的支付需求繁多，支付渠道已呈“碎片化”状态，并且“碎片化”程度将逐渐加深。聚合支付顾名思义就是将目前主流的支付进行整合，形成第三方支付的聚合通道，也被称为“第四方支付”。 下图是聚合支付的产业结构：  聚合支付不进行资金">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807174552351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080717463898.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807174701961.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807175154998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807180227983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807181352314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807181558989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080718170079.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807181722239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807181758982.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807182009235.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807182333692.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807183514800.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807183611159.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807183711171.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807183840341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807183958770.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807184011203.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807184525276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807184832946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807184858946.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080718491057.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807184928433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200807185218259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2022-05-08T08:59:49.000Z">
<meta property="article:modified_time" content="2022-05-08T09:28:12.861Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="项目">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200807174552351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70">
  
  
  <title>闪聚支付项目-项目总结 - JavaLife</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"kxuG7mjg9gVQgrv1i9UIzeQR-gzGzoHsz","app_key":"VeVOnPRwIu2WTgwycIlFxdLy","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>JavaLife</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/20220507155215.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="闪聚支付项目-项目总结">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-05-08 16:59" pubdate>
        2022年5月8日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      12k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      97 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">闪聚支付项目-项目总结</h1>
            
            <div class="markdown-body">
              <h4 id="闪聚支付是个什么样的项目？"><a href="#闪聚支付是个什么样的项目？" class="headerlink" title="闪聚支付是个什么样的项目？"></a>闪聚支付是个什么样的项目？</h4><p><strong>项目背景</strong></p>
<p>随着移动支付的盛行，商业银行、第三方支付公司、其它清算机构、消费金融公司等众多类型的机构，都在为商户提供网络（移动）支付解决方案。另一方面，用户的支付需求繁多，支付渠道已呈“碎片化”状态，并且“碎片化”程度将逐渐加深。聚合支付顾名思义就是将目前主流的支付进行整合，形成第三方支付的聚合通道，也被称为“第四方支付”。</p>
<p>下图是聚合支付的产业结构：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807174552351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>聚合支付不进行资金清算，因此无需支付牌照，其只是完成支付环节的信息流转和商户运营的承载，其在<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E9%9B%86%E5%90%88&spm=1001.2101.3001.7020">集合</a>银联、支付宝、微信等主流支付方式的基础上，帮助商户降低接入成本，提高运营效率，具有中立性、灵活性、便捷性等特点。</p>
<p>下图是商户通过聚合支付平台完成支付业务：</p>
<p><img src="https://img-blog.csdnimg.cn/2020080717463898.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h5 id="项目的功能模块"><a href="#项目的功能模块" class="headerlink" title="项目的功能模块"></a>项目的功能模块</h5><p>平台主要包括三个模块：官网&amp;开放平台、商户平台、运营平台，详细功能如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807174701961.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<table>
<thead>
<tr>
<th align="center"><strong>功能模块名称</strong></th>
<th align="center"><strong>功能说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">官网&amp;开放平台</td>
<td align="center">产品展示、功能介绍、帮助中心和开发者中心</td>
</tr>
<tr>
<td align="center">商户平台-首页</td>
<td align="center">提供商户注册、登录、基本信息查看、数据看板</td>
</tr>
<tr>
<td align="center">商户平台-账户管理</td>
<td align="center">提供商户企业资质认证、企业信息查看和套餐购买</td>
</tr>
<tr>
<td align="center">商户平台-支付管理</td>
<td align="center">为商户提供应用创建、渠道参数配置、交易总览和开启支付(生成二维码)等</td>
</tr>
<tr>
<td align="center">商户平台-门店管理</td>
<td align="center">为商户提供新增门店、店长分配、门店导入等</td>
</tr>
<tr>
<td align="center">商户平台-员工管理</td>
<td align="center">为商户提供新增员工、定义角色、分配角色等</td>
</tr>
<tr>
<td align="center">商户平台-优惠管理</td>
<td align="center">为商户提供优惠券管理、活动统计等</td>
</tr>
<tr>
<td align="center">运营平台-商户管理</td>
<td align="center">对商户进行检索、审核和订单统计</td>
</tr>
<tr>
<td align="center">运营平台-优惠管理</td>
<td align="center">为商户设置优惠策略和优惠券发送</td>
</tr>
<tr>
<td align="center">运营平台-管理员管理</td>
<td align="center">为平台提供新增管理员、定义角色和分配角色等</td>
</tr>
</tbody></table>
<h5 id="项目的技术架构"><a href="#项目的技术架构" class="headerlink" title="项目的技术架构"></a>项目的技术架构</h5><p>见问题2</p>
<h4 id="项目采用什么技术架构？"><a href="#项目采用什么技术架构？" class="headerlink" title="项目采用什么技术架构？"></a>项目采用什么技术架构？</h4><p>闪聚支付采用当前流行的前后端分离架构开发，由用户层、UI层、微服务层、数据层等部分组成，为PC、H5等客户端用户提供服务。下图是系统的技术架构图：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807175154998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>业务流程举例：</p>
<ol>
<li>用户可以通过PC、手机等客户端访问闪聚支付。</li>
<li>系统应用CDN技术，对一些图片、CSS、视频等资源从CDN调度访问。</li>
<li>所有的请求全部经过负载均衡器。</li>
<li>首先请求UI层，渲染用户界面。</li>
<li>商户通过平台进行注册和企业认证，UI层通过网关请求服务层，服务层完成业务处理后将数据持久化到数据层。</li>
<li>平台运营人员对商户信息进行审核，其系统执行流程和商户注册过程一致，UI层请求服务层业务处理，服务层通过数据层将数据持久化到数据库。</li>
</ol>
<p>各模块说明如下：</p>
<table>
<thead>
<tr>
<th align="center"><strong>名称</strong></th>
<th align="center"><strong>功能描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">用户层</td>
<td align="center">用户层描述了本系统所支持的用户类型包括：pc用户、app用户、h5用户。<br/>pc用户通过浏览器访问系统、app用户通过android、ios手机访问系统，H5用户通过h5页面访问系统。</td>
</tr>
<tr>
<td align="center">CDN</td>
<td align="center">CDN全称Content Delivery Network，即内容分发网络，本系统所有静态资源全部通过CDN加速来提高访问速度。<br/>系统静态资源包括：html页面、js文件、css文件、image图片、pdf和ppt及doc教学文档、video视频等。</td>
</tr>
<tr>
<td align="center">负载均衡</td>
<td align="center">系统的CDN层、UI层、服务层及数据层均设置了负载均衡服务，上图仅在UI层前边标注了负载均衡。<br/>每一层的负载均衡会根据系统的需求来确定负载均衡器的类型，<br/>系统支持4层负载均衡+7层负载均衡结合的方式，<br/>4层负载均衡是指在网络传输层进行流程转发，根据IP和端口进行转发，<br/>7层负载均衡完成HTTP协议负载均衡及反向代理的功能，根据url进行请求转发。<br/></td>
</tr>
<tr>
<td align="center">UI层</td>
<td align="center">UI层描述了系统向pc用户、app用户、h5用户提供的产品界面。根据系统功能模块特点确定了UI层包括如下产品界面类型：<br/>1）面向商户的闪聚支付商户平台。<br/>2）面向平台运营人员的闪聚支付运营平台。</td>
</tr>
<tr>
<td align="center">微服务层</td>
<td align="center">微服务层将系统服务分类两类：业务微服务、基础微服务。<br/>业务微服务：主要为商户和运营人员提供业务服务，包括统一认证、商户服务、交易服务等。<br/>基础微服务：为系统级的公共服务，不涉及具体的业务，包括文件服务、配置服务、验证码服务、调度服务等。</td>
</tr>
<tr>
<td align="center">数据层</td>
<td align="center">数据层描述了系统的数据存储的内容类型，持久化的业务数据使用MySQL。<br/>消息队列：存储系统服务间通信的消息，本身提供消息存取服务，与微服务层的系统服务连接。<br/>缓存：作为系统的缓存服务，存储商户信息、验证码信息、用户信息等，与微服务层的所有服务连接。<br/>文件存储：提供系统静态资源文件的分布式存储服务，文件存储服务器作为CDN服务器的数据来源，<br/>CDN上的静态资源将最终在文件存储服务器上保存多份。<br/></td>
</tr>
<tr>
<td align="center">外部系统接口</td>
<td align="center">1）支付宝、微信支付接口，本系统提供支付宝、微信两种支付接口。<br/>2）短信接口，本系统与第三方平台对接短信发送接口。<br/>3）文件存储 ，静态资源文件的存储采用第三方文件服务方式，本系统采用七牛云文件存储。<br/>4）CDN，本系统与第三方CDN服务对接，使用CDN加速服务来提高本系统的访问速度。<br/></td>
</tr>
</tbody></table>
<h5 id="微服务技术栈"><a href="#微服务技术栈" class="headerlink" title="微服务技术栈"></a>微服务技术栈</h5><p>所有微服务基于 <strong><code>Spring Boot</code></strong> 、**<code>Spring Cloud Alibaba</code>** 构建。</p>
<h5 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h5><p><strong><code>Spring MVC</code></strong> 、**<code>Swagger</code>**</p>
<h5 id="业务层"><a href="#业务层" class="headerlink" title="业务层"></a>业务层</h5><ul>
<li>事务控制：**<code>Spring</code>**</li>
<li>数据缓存：**<code>Spring Data Redis</code>**</li>
<li>消息队列：**<code>Spring RocketTemplate</code>**</li>
</ul>
<h5 id="持久层"><a href="#持久层" class="headerlink" title="持久层"></a>持久层</h5><ul>
<li><strong><code>MySQL</code></strong> 数据库</li>
<li><strong><code>MyBatisPlus</code></strong> 持久层框架</li>
<li>连接池 <strong><code>com.alibaba.druid</code></strong> （采用 <strong><code>druid-spring-boot-starter</code></strong> ）</li>
<li><strong><code>ShardingJdbc</code></strong> 分库分表技术</li>
</ul>
<p>项目技术栈如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807180227983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>闪聚支付服务端基于 <strong><code>Spring Boot</code></strong> 构建，采用 <strong><code>Spring Cloud Alibaba</code></strong> 微服务架构。</p>
<p> <strong>1、基础设施</strong></p>
<p>业务数据持久化采用 <strong><code>MySQL</code></strong> ，数据缓存采用 <strong><code>Redis</code></strong> ，采用 <strong><code>RocketMQ</code></strong> 的事务消息机制完成部分场景下的分布式事务控制，采用第三方云平台完成文件上传与分布式存储。</p>
<p><strong>2、组件</strong></p>
<p>系统微服务基于 SpringBoot 开发，服务层基于 Dubbo Spring Cloud 构建，数据库连接池采用 Druid ，POJO构建采用 Lombok ，日志系统采用 Log4j2 ，Mybatis Plus 持久层接口实现，Sharding-jdbc 分库分表组件，Swagger 接口规范组件，XXL-job 分布式任务调度组件，Sentinel 限流组件等。</p>
<p><strong>3、接入</strong></p>
<p>Zuul 网关完成客户端认证、路由转发等功能，JWT 提供前后端令牌管理方案。</p>
<p><strong>4、视图</strong></p>
<p>平台支持H5、PC等各种前端。</p>
<p><strong>接口定义规范</strong></p>
<p>1、项目面向前端的Http接口使用 swagger 文档描述接口的内容</p>
<p>2、面向前端的Http接口定义规范如下：</p>
<p>1）请求</p>
<p>Get 请求时，前端请求key/value串，SpringMVC采用基本数据类型（String、Integer等）接收参数，特殊情况使用自定义对象接收。</p>
<p>比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation(value = &quot;根据id查询商户信息&quot;)</span><br><span class="hljs-meta">@GetMapping(&quot;/merchants/&#123;id&#125;&quot;)</span><br><span class="hljs-keyword">public</span> MerchantDTO <span class="hljs-title function_">queryMerchantById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span><br><br><span class="hljs-meta">@ApiOperation(&quot;根据应用和服务类型和支付渠道获取单个支付渠道参数&quot;)</span><br><span class="hljs-meta">@GetMapping(value = &quot;/my/pay-channel‐params/apps/&#123;appId&#125;/platform‐channels/&#123;platformChannel&#125;/pay-channels/&#123;payChannel&#125;&quot;)</span><br><span class="hljs-keyword">public</span> PayChannelParamDTO <span class="hljs-title function_">queryPayChannelParam</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;appId&quot;)</span> String appId, <span class="hljs-meta">@PathVariable(&quot;platformChannel&quot;)</span> String platformChannel, <span class="hljs-meta">@PathVariable(&quot;payChannel&quot;)</span> String payChannel)</span><br></code></pre></td></tr></table></figure>



<p>Post请求时，前端请Form表单数据（ application/x-www-form-urlencoded ）和Json数据( ContentType=application/json )、多部件类型数据（ multipart/form-data ），SpringMVC采用基本类型及自定义对象接收，对于Json数据SpringMVC使用 @RequestBody 注解解析请求的json数据。</p>
<p>比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;/merchants/register&quot;)</span><br><span class="hljs-keyword">public</span> MerchantRegisterVO <span class="hljs-title function_">registerMerchant</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> MerchantRegisterVO merchantRegisterVO)</span><br><br><span class="hljs-meta">@PostMapping(&quot;/upload&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">upload</span><span class="hljs-params">(<span class="hljs-meta">@ApiParam(value = &quot;证件照&quot;, required = true)</span> <span class="hljs-meta">@RequestParam(&quot;file&quot;)</span> MultipartFile multipartFile)</span> <span class="hljs-keyword">throws</span> IOException<br><br><span class="hljs-meta">@PostMapping(&quot;/createAliPayOrder&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createAlipayOrderForStore</span><span class="hljs-params">(OrderConfirmVO orderConfirmVO, HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> BusinessException, IOException<br></code></pre></td></tr></table></figure>



<p>2）响应</p>
<p>响应结果统一信息为：是否成功、操作代码、提示信息及自定义数据。</p>
<p>响应结果统一格式为json，扫码类接口为text/html。</p>
<h5 id="Swagger如何使用？"><a href="#Swagger如何使用？" class="headerlink" title="Swagger如何使用？"></a>Swagger如何使用？</h5><p>Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务(<a target="_blank" rel="noopener" href="https://swagger.io/)%E3%80%82">https://swagger.io/)。</a> 它的主要作用是：</p>
<p>1、使得前后端分离开发更加方便，有利于团队协作</p>
<p>2、接口的文档在线自动生成，降低后端开发人员编写接口文档的负担</p>
<p>3、如何使用？</p>
<p>项目中SpringBoot集成Swagger，Spring已经将Swagger纳入自身的标准，建立了Spring-swagger项目，现在叫Springfox。通过在项目中引入Springfox ，即可非常简单快捷的使用Swagger。</p>
<p>在Controller接口方法上使用注解描述接口内容，Swagger常用注解如下：</p>
<ul>
<li><strong><code>@Api</code></strong> ：修饰整个类，描述Controller的作用</li>
<li><strong><code>@ApiOperation</code></strong> ：描述一个类的一个方法，或者说一个接口</li>
<li><strong><code>@ApiParam</code></strong> ：单个参数的描述信息</li>
<li><strong><code>@ApiModel</code></strong> ：用对象来接收参数</li>
<li><strong><code>@ApiModelProperty</code></strong> ：用对象接收参数时，描述对象的一个字段</li>
<li><strong><code>@ApiResponse</code></strong> ：HTTP响应其中1个描述</li>
<li><strong><code>@ApiResponses</code></strong> ：HTTP响应整体描述</li>
<li><strong><code>@ApiIgnore</code></strong> ：使用该注解忽略这个API</li>
<li><strong><code>@ApiError</code></strong> ：发生错误返回的信息</li>
<li><strong><code>@ApiImplicitParam</code></strong> ：一个请求参数</li>
<li><strong><code>@ApiImplicitParams</code></strong> ：多个请求参数的描述信息</li>
</ul>
<h5 id="注册中心-amp-服务发现"><a href="#注册中心-amp-服务发现" class="headerlink" title="注册中心&amp;服务发现"></a>注册中心&amp;服务发现</h5><p>项目采用 <strong><code>Nacos</code></strong> 作为注册中心，注册中心也叫服务发现中心，服务发现就是服务消费方通过服务发现中心智能发现服务提供方，从而进行远程调用的过程。</p>
<p>下图是服务发现的流程：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807181352314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>上图中服务实例本身并不记录服务生产方的网络地址，所有服务实例内部都会包含<strong>服务发现客户端。</strong></p>
<p>（1）在每个服务启动时会向<strong>服务发现中心</strong>上报自己的网络位置。这样，在服务发现中心内部会形成一个<strong>服务注册表，服务注册表</strong>是服务发现的核心部分，是包含所有服务实例的网络地址的数据库。</p>
<p>（2）<strong>服务发现客户端</strong>会定期从<strong>服务发现中心</strong>同步<strong>服务注册表</strong> ，并缓存在客户端。</p>
<p>（3）当需要对某服务进行请求时，服务实例通过该注册表，定位目标服务网络地址。若目标服务存在多个网络地址，则使用负载均衡算法从多个服务实例中选择出一个，然后发出请求。</p>
<h5 id="配置中心"><a href="#配置中心" class="headerlink" title="配置中心"></a>配置中心</h5><p>项目采用 <strong><code>Nacos</code></strong> 作为配置中心，配置中心将配置从各应用中剥离出来，对配置进行统一管理，应用自身不需要自己去管理配置。<img src="https://img-blog.csdnimg.cn/20200807181558989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>配置中心的服务流程如下：</p>
<ol>
<li>用户在配置中心更新配置信息。</li>
<li>服务A和服务B及时得到配置更新通知，从配置中心获取配置。</li>
</ol>
<p><strong>总得来说，配置中心就是一种统一管理各种应用配置的基础服务组件。</strong></p>
<p>在 <strong><code>Nacos</code></strong> 中每个微服务对应一个主配置文件，配置文件的名称即服务名加文件扩展名。</p>
<p><img src="https://img-blog.csdnimg.cn/2020080718170079.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>主配置文件可以增加很多扩展配置文件，使用 <strong><code>ext-config</code></strong> 进行扩展：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807181722239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p><code>Nacos</code> 重要的概念：</p>
<p><code>Nacos</code> 抽象定义了 <code>Namespace</code> 、<code>Group</code> 、<code>Data ID</code> 的概念，具体这几个概念代表什么，取决于我们把它们看成什么，这里推荐给大家一种用法，如下图：</p>
<p><code>Namespace</code> ：代表不同环境，如开发、测试、生产环境。</p>
<p>项目的 <code>bootstrap.yml</code> 中别忘记配置 <code>Namespace</code>！！！</p>
<p><code>Group</code> ：代表某项目，如XX医疗项目、XX电商项目</p>
<p><code>Data ID </code>：每个项目下往往有若干个工程，每个配置集(<code> DataId</code> )是一个工程的主配置文件</p>
<p><img src="https://img-blog.csdnimg.cn/20200807181758982.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h5 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h5><p>需要了解网关的作用：负载均衡、路由转发、请求过虑等。</p>
<p><img src="https://img-blog.csdnimg.cn/20200807182009235.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h5 id="项目使用Spring了吗？用了它的哪些东西？"><a href="#项目使用Spring了吗？用了它的哪些东西？" class="headerlink" title="项目使用Spring了吗？用了它的哪些东西？"></a>项目使用Spring了吗？用了它的哪些东西？</h5><p>项目是基于Spring进行构建，每一层都需要Spring。</p>
<p>1、每个微服务工程是采用 <code>Spring Boot</code> 开发。</p>
<p>2、基于<code> Spring Cloud Alibaba</code> 实现微服务的配置、服务注册、<code>Dubbo</code> 接口。</p>
<p>其中，最重要的是实现了 <code>Dubbo</code> 接口与 <code>RESTful</code> 接口均可以注册至 <code>Nacos</code> 。</p>
<p>3、数据层使用 <code>MyBatis Plus</code> 、<code>Spring RocketMQ</code> 、<code>Spring Data redis</code> 。</p>
<p>4、业务层使用 <code>Spring</code> 来控制本地事务。</p>
<p>5、控制层使用<code> SpringMVC</code> 开发RESTful接口。</p>
<h5 id="Spring-Cloud-Alibaba是怎么使用的？"><a href="#Spring-Cloud-Alibaba是怎么使用的？" class="headerlink" title="Spring Cloud Alibaba是怎么使用的？"></a>Spring Cloud Alibaba是怎么使用的？</h5><p><strong><code>Spring Cloud Alibaba</code></strong> 是阿里巴巴公司基于Spring Cloud标准实现的一套微服务开发框架集合，它和Netflix一样都是Spring Cloud微服务开发实现方案。</p>
<p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/alibaba/spring-cloud-alibaba">https://github.com/alibaba/spring-cloud-alibaba</a></p>
<p>本项目基于 <strong><code>Spring Cloud Alibaba</code></strong> 框架构建系统架构，如下图：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807182333692.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>系统的微服务分为两类：应用层服务和业务层服务。</p>
<p>应用层服务对前端暴露RESTful接口，业务层服务供应用层调用，暴露Dubbo服务。</p>
<p>1、每个应用层服务使用Spring Boot开发，每个微服务工程包括了web、service、dao三层，这和开发一般的项目没有区别：</p>
<p>a、Web层使用Spring MVC实现，对外暴露RESTful接口供前端调用。</p>
<p>b、Service层就是根据业务逻辑编写JavaBean，并使用Spring的声明式事务控制方式来控制事务。</p>
<p>c、Dao层就是数据访问接口，使用MybatisPlus访问MySQL。</p>
<p>2、每个业务层服务通常只需要编写Service和Dao即可，Service暴露为Dubbo服务接口供应用层调用。（特殊情况除外，比如交易服务暴露支付入口HTTP接口）</p>
<p>Dubbo接口如何开发？</p>
<p>和开发一个普通的Service Bean一样，需要在Service类上使用 <strong><code>@org.apache.dubbo.config.annotation.Service</code></strong> 注解。</p>
<p>3、微服务开发完成要向Nacos注册中心注册，以便被其它微服务查找和访问。</p>
<p>4、微服务与微服务之间使用Dubbo来调用。只需要在调用方使用 <strong><code>@org.apache.dubbo.config.annotation.Reference</code></strong> 注解引入服务接口，通过生成代理对象发起远程调用。</p>
<p>5、前端访问微服务需要通过网关，网关使用Nginx和Zuul来实现，Nginx是最前边的负载均衡，通过Nginx之后便到达了Zuul，项目中Zuul的功能是过虑用户请求，判断用户身份，对于一些对外公开的微服务则需要经过Zuul，直接通过Nginx负载均衡即可访问。</p>
<h5 id="视图层用什么技术实现？"><a href="#视图层用什么技术实现？" class="headerlink" title="视图层用什么技术实现？"></a>视图层用什么技术实现？</h5><ol>
<li>从系统整体架构上来说，视图层包括前端视图和服务端视图。</li>
<li>前端视图采用 <strong><code>vue.js</code></strong> + <strong><code>elementUI</code></strong> 产品界面。</li>
<li>服务端提供给vue前端的都是暴露的RESTful接口，统一用JSON响应数据。</li>
<li>交易服务对外提供支付入口，使用Freemarker视图渲染技术生成HTML页面返回给浏览器。</li>
</ol>
<h5 id="接口是怎么定义的？采用什么数据格式？如何实现？"><a href="#接口是怎么定义的？采用什么数据格式？如何实现？" class="headerlink" title="接口是怎么定义的？采用什么数据格式？如何实现？"></a>接口是怎么定义的？采用什么数据格式？如何实现？</h5><p>接口分为面向前端的HTTP接口，和面向服务内部调用的Dubbo服务接口。</p>
<p>1、面向前端的RESTful接口</p>
<p>参考2.2 接口定义规范.</p>
<p>2、面向服务内部采用Dubbo服务接口</p>
<p>1）采用Dubbo协议具体使用Hessian2 二进制序列化协议。</p>
<p>2）编写Service类及方法，并使用 <strong><code>@org.apache.dubbo.config.annotation.Service</code></strong> 注解在类上标识。</p>
<p>3）Service类需要操作数据库时则通过调用Dao层的Mapper接口来完成。</p>
<p>4）Service与Service之间的调用分为本地调用和远程调用</p>
<p>本地调用是同一个工程的service之间的调用，只需要使用 <strong><code>@Autowired</code></strong> 或 <strong><code>@Resource</code></strong> 注入即可使用。</p>
<p>远程调用是跨服务（工程）的service之间的调用，需要在调用方使用 <strong><code>@org.apache.dubbo.config.annotation.Reference</code></strong> 注解引入服务接口，通过生成代理对象发起远程调用。</p>
<h5 id="项目中的代码是否自动生成？"><a href="#项目中的代码是否自动生成？" class="headerlink" title="项目中的代码是否自动生成？"></a>项目中的代码是否自动生成？</h5><p>项目中使用 <strong><code>Mybatis-Plus</code></strong> 提供的代码自动生成方法来生成代码。</p>
<p>自动生成的代码包括：**<code>entity</code>** 、**<code>DTO</code>** 、**<code>mapper</code>** （**<code>java</code>** 、**<code>xml</code>** ）等。</p>
<h5 id="前端采用什么技术栈？"><a href="#前端采用什么技术栈？" class="headerlink" title="前端采用什么技术栈？"></a>前端采用什么技术栈？</h5><p>前端工程大多为单页面应用（ <strong><code>SPA</code></strong> ），采用 <strong><code>vue.js</code></strong> 框架开发，搜索功能前端采用 <strong><code>nuxt.js</code></strong> 服务端渲染（ <strong><code>SSR</code></strong> ）框架开发。</p>
<p>技术栈包括：</p>
<ul>
<li><strong><code>node.js</code></strong></li>
<li><strong><code>vue.js</code></strong></li>
<li><strong><code>npm/cnpm</code></strong></li>
<li><strong><code>webpack</code></strong></li>
<li><strong><code>axios</code></strong></li>
<li><strong><code>nuxt.js</code></strong></li>
</ul>
<h4 id="前后端开发时具体流程是什么？"><a href="#前后端开发时具体流程是什么？" class="headerlink" title="前后端开发时具体流程是什么？"></a>前后端开发时具体流程是什么？</h4><p>前后端分离开发模式在互联网公司最常见，特别是一些大型的互联网公司，但是一些传统的软件开发企业仍然是采用传统开发模式，此问题被问及是考察你有没有真正体会前端开发的好处。</p>
<p>1、前端与后端开发人员讨论确定接口。</p>
<p>接口讨论通过，形成接口文档 。</p>
<p>本项目专门设立一个api工程，在此工程定义接口，**<code>Spring Boot</code>** 集成 **<code>Swagger</code>**，生成 <strong><code>Swagger</code></strong> 接口，前后端 开发人员通过html查看接口文档的内容。</p>
<p>2、前端与后端开发人员按照接口文档进行开发。</p>
<p>开发过程中各自进行单元测试。</p>
<p>前端人员怎么进行单元测试？</p>
<p>前端人员可以通过mock平台生成一些模拟数据，比如：**<code>EasyMock</code>** 。</p>
<p>3、双方功能开发完成进行前后端联调。</p>
<h4 id="商户平台"><a href="#商户平台" class="headerlink" title="商户平台"></a>商户平台</h4><p>商户平台是提供商户使用的进行应用管理、支付渠道参数配置、门店管理、员工管理等商户管理的业务操作。</p>
<p>包括 如下功能：</p>
<ol>
<li>商户注册 ，资质申请</li>
<li>支付渠道参数配置。</li>
<li>门店管理，二维码生成。</li>
<li>员工管理。</li>
</ol>
<h5 id="商户注册流程"><a href="#商户注册流程" class="headerlink" title="商户注册流程"></a>商户注册流程</h5><p>商户注册交互流程如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807183514800.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h5 id="云平台的使用"><a href="#云平台的使用" class="headerlink" title="云平台的使用"></a>云平台的使用</h5><p>1、短信验证码</p>
<p>使用腾讯云</p>
<p>2、上传商户资质证件</p>
<p>使用七牛云</p>
<p>如何使用云平台？</p>
<p>1）详细阅读云平台的具体业务接口，比如文件上传、文件下载接口。</p>
<p>2）下载云平台的sdk（开发工具包）</p>
<p>3）将sdk依赖引入工程，编写独立的工具类调用云平台的接口。</p>
<h5 id="SaaS平台是如何实现"><a href="#SaaS平台是如何实现" class="headerlink" title="SaaS平台是如何实现"></a>SaaS平台是如何实现</h5><p>1、理解多租户的概念</p>
<p>当一个使用SaaS模式部署的软件同时有多个企业用户租用时，每一个企业都是独立的租用者，我们通常称他为：租户(tenant)；同时有多个租用者，那就是多租户(multi-tenant)。多租户（Multi-tenant)是SaaS最重要的核心概念和关键技术。</p>
<p><img src="https://img-blog.csdnimg.cn/20200807183611159.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>2、如何实现SaaS？</p>
<p>本项目使用公司现成的SaaS系统，实现租户管理、用户管理、角色及权限管理和统一认证的功能。</p>
<p>闪聚支付平台在注册商户时向SaaS系统写入租户信息完成对接 。</p>
<h5 id="项目中OAuth2-0怎么使用？"><a href="#项目中OAuth2-0怎么使用？" class="headerlink" title="项目中OAuth2.0怎么使用？"></a>项目中OAuth2.0怎么使用？</h5><p>1、**<code>OAuth2.0</code>** 是什么？</p>
<p>OAuth（开放授权）是一个开放标准，允许用户授权第三方应用访问他们存储在另外的服务提供者上的信息，而不需要将用户名和密码提供给第三方应用或分享他们数据的所有内容。</p>
<p>认证流程：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807183711171.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>OAauth2.0包括以下角色：</p>
<p>1）客户端</p>
<p>本身不存储资源，需要通过资源拥有者的授权去请求资源服务器的资源，比如：Android客户端、Web客户端（浏览器端）、微信客户端等。</p>
<p>2）资源拥有者</p>
<p>通常为用户，也可以是应用程序，即该资源的拥有者。</p>
<p>3）授权服务器（也称认证服务器）</p>
<p>用于服务提供商对资源拥有的身份进行认证、对访问资源进行授权，认证成功后会给客户端发放令牌（access_token），作为客户端访问资源服务器的凭据。本例为微信的认证服务器。</p>
<p>4）资源服务器</p>
<p>存储资源的服务器，本例子为微信存储的用户信息。</p>
<p>2、**<code>OAuth2.0</code>**怎么使用？</p>
<p>OAuth2.0提供了四种授权(获取令牌)方式：</p>
<p>1）授权码模式：这种模式是四种模式中最安全的一种模式。一般用于Web服务器端应用或第三方的原生App调用资源服务的时候。场景：使用微信登录其它网站。</p>
<p>2）密码模式：适应于第一方的单页面应用以及第一方的原生App，本项目用户认证使用密码模式。</p>
<p>3）客户端模式：适应于没有用户参与的，完全信任的一方或合作方服务器端程序接入。</p>
<p>4）简化模式：适用于第三方单页面应用接入OAuth2.0认证服务。</p>
<h4 id="交易管理"><a href="#交易管理" class="headerlink" title="交易管理"></a>交易管理</h4><p>平台订单相关的管理由交易服务负责。</p>
<h5 id="C扫B的实现流程是什么？"><a href="#C扫B的实现流程是什么？" class="headerlink" title="C扫B的实现流程是什么？"></a>C扫B的实现流程是什么？</h5><p><img src="https://img-blog.csdnimg.cn/20200807183840341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>C扫B即买方（顾客）扫商户的二维码完成支付的过程。</p>
<ol>
<li>用户向商户发起支付请求</li>
<li>商户店员使用闪聚支付平台请求获取二维码</li>
<li>平台请求商户平台应用统一下单接口</li>
<li>商户平台应用调用交易服务生成支付信息</li>
<li>商户平台应用根据返回的信息生成二维码返回给前端</li>
<li>商户店员展示二维码给用户</li>
<li>用户使用微信或支付宝扫描二维码</li>
<li>交易服务根据请求类型和支付渠道生成支付确认页面返回给前端</li>
<li>用户输入金额并点击确认支付</li>
<li>交易服务收到请求后，保存订单信息并向支付渠道代理服务发起支付请求</li>
<li>支付渠道代理服务生成渠道支付参数，向微信或支付宝发起支付请求</li>
<li>根据返回的结果发送支付结果查询消息</li>
<li>第三方支付生成支付凭据返回给用户的支付客户端</li>
<li>支付渠道代理服务消费支付结果查询消息</li>
<li>根据消息内容查询订单支付结果，并发送支付结果消息</li>
<li>交易服务消费支付结果消息</li>
<li>根据消息内容更新数据库中的订单支付结果</li>
</ol>
<h5 id="二维码如何生成？"><a href="#二维码如何生成？" class="headerlink" title="二维码如何生成？"></a>二维码如何生成？</h5><p>使用 <strong><code>ZXing</code></strong> 一个开源项目完成二维码的生成，ZXing是用Java编写的多格式的1D / 2D条码图像处理库，使用ZXing可以生成、识别 **<code>QR Code</code>**（二维码）。</p>
<h5 id="都对接了哪些支付接口？"><a href="#都对接了哪些支付接口？" class="headerlink" title="都对接了哪些支付接口？"></a>都对接了哪些支付接口？</h5><p>闪聚支付平台提供C扫B和B扫C的支付服务。</p>
<p>1、C扫B对接接口如下</p>
<p>微信：JSAPI（下单、查询订单等）</p>
<p>支付宝：手机网站支付ALIPAY_WAP（下单、查询订单等）</p>
<p>2、B扫C对接接口如下</p>
<p>微信：付款码支付产品</p>
<p>支付宝：当面付条码支付。</p>
<p>3、微信JSAPI接口交互流程</p>
<p><img src="https://img-blog.csdnimg.cn/20200807183958770.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>4、支付接口交互流程</p>
<p><img src="https://img-blog.csdnimg.cn/20200807184011203.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h5 id="如何获取支付结果？"><a href="#如何获取支付结果？" class="headerlink" title="如何获取支付结果？"></a>如何获取支付结果？</h5><p>第三方支付系统提供异步通知支付结果和主动查询支付结果两种方式：</p>
<p>异步通知支付结果：第三方支付系统调用闪聚支付平台通知支付结果。当通知累积一定次数无法到达，第三方支付系统将不再通知。</p>
<p>主动查询支付结果：闪聚支付平台主动调用第三方支付系统查询支付结果。</p>
<p>本项目采用MQ完成主动查询支付结果实现。</p>
<h5 id="项目中MQ如何使用？"><a href="#项目中MQ如何使用？" class="headerlink" title="项目中MQ如何使用？"></a>项目中MQ如何使用？</h5><p>目使用消息队列RocketMQ完成支付渠道代理服务与交易服务之间的通信，并且用到的RocketMQ 的延迟消息，如下图：</p>
<p><img src="https://img-blog.csdnimg.cn/20200807184525276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>1、支付渠道代理服务调用第三方支付下单接口。（此时顾客开始输入密码进行支付）</p>
<p>2、支付渠道代理向消息队列发送一条延迟消息，消费方仍是支付渠道代理服务。</p>
<p>3、支付渠道代理调用支付宝接口查询支付结果，如果支付成功将支付结果发送至MQ，消费方是交易服务。</p>
<p>4、交易服务接收到支付结果消息，更新订单状态。</p>
<h5 id="项目中Redis如何使用？"><a href="#项目中Redis如何使用？" class="headerlink" title="项目中Redis如何使用？"></a>项目中Redis如何使用？</h5><p>渠道参数查询频繁，每一次支付都会查询渠道参数，为提供查询性能这里我们将渠道参数缓存到redis中，缓存流程如下：</p>
<p>1、保存渠道参数添加缓存</p>
<p>保存渠道参数成功，同时将渠道参数保存在Redis中。</p>
<p>2、查询渠道参数缓存</p>
<p>查询渠道参数，先从Redis查询，如果Redis存在则返回渠道参数，否则从数据库查询同时将查询到的渠道参数存储在Redis中。</p>
<h4 id="数据库分库分表是如何实现的？"><a href="#数据库分库分表是如何实现的？" class="headerlink" title="数据库分库分表是如何实现的？"></a>数据库分库分表是如何实现的？</h4><p>项目采用微服务架构，每个微服务使用一个数据库，在系统设计上就已经分库了。</p>
<p>针对订单数据量大的特点，为提高系统的性能使用Sharding-JDBC对订单表进行分库分表。</p>
<p>方案如下：</p>
<p>对交易数据库进行分库，对订单表进行分表。</p>
<p>分库规则：分片键为商户ID，表达式ds$-&gt;{MERCHANT_ID % 2}</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sharding‐column</span>: <span class="hljs-string">MERCHANT_ID</span><br><span class="hljs-attr">algorithm‐expression</span>: <span class="hljs-string">ds$‐&gt;&#123;MERCHANT_ID % 2&#125; #商户ID%2</span><br></code></pre></td></tr></table></figure>

<p>分表规则：分片键订单表主键，表达式pay_order_$-&gt;{ID % 2}</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sharding‐column</span>: <span class="hljs-string">ID</span><br><span class="hljs-attr">algorithm‐expression</span>: <span class="hljs-string">pay_order_$‐&gt;&#123;ID % 2&#125; #订单ID%2</span><br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200807184832946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h4 id="项目用到枚举类型了吗？"><a href="#项目用到枚举类型了吗？" class="headerlink" title="项目用到枚举类型了吗？"></a>项目用到枚举类型了吗？</h4><p>项目用到了枚举类型，以下地方用到枚举：</p>
<p>1、支付入口 根据客户端类型判断下一步的走向，客户端类型为枚举类型。</p>
<p><img src="https://img-blog.csdnimg.cn/20200807184858946.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>2、支付状态使用枚举类型，系统对每个第三方支付系统的支付结果统一格式为系统枚举类型。</p>
<p><img src="https://img-blog.csdnimg.cn/2020080718491057.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>3、异常代码</p>
<p><img src="https://img-blog.csdnimg.cn/20200807184928433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h4 id="项目用的日志技术是什么？"><a href="#项目用的日志技术是什么？" class="headerlink" title="项目用的日志技术是什么？"></a>项目用的日志技术是什么？</h4><p>项目记录日志采用 <strong><code>log4j2</code></strong> 。</p>
<p>log4j2是log4j 1.x 的升级版，通过与logback对比分析，log4j2的性能更好，项目组采用log4j2。</p>
<p>常见的日志框架有哪些？</p>
<p>log4j是apache实现的一个开源日志组件</p>
<p>logback同样是由log4j的作者设计完成的，拥有更好的特性，是slf4j的原生实现。</p>
<p>log4j2是log4j 1.x和logback的改进版，采用了一些新技术使得日志的吞吐量、性能比log4j 1.x提高10倍，并解决了一些死锁的bug，而且配置更加简单灵活。</p>
<h4 id="一个接口出现Bug你是怎么调试的？"><a href="#一个接口出现Bug你是怎么调试的？" class="headerlink" title="一个接口出现Bug你是怎么调试的？"></a>一个接口出现Bug你是怎么调试的？</h4><p>1、接口的开发需要前端和服务端共同调试，要仔细阅读测试人员反映的bug信息，判断这个bug是服务端的bug是前端的bug。</p>
<p>服务接口开发完成会使用postman工具进行测试，测试没有问题再提交到Git或SVN。</p>
<p>前端通常在 mock环境调试接口，不依赖服务端接口，在前后端集成调试时才需要前端连上服务端集成调试。</p>
<p>2、找到bug的出错点就可以修改Bug。</p>
<p>如何找bug的出错点？</p>
<p>根据异常信息，通常有错误代码行的大概位置，再加断点调试及日志跟踪。</p>
<p>对于生产环境通常跟踪系统日志，通过日志定位bug，所以在编写代码时关键地方一定要加日志。</p>
<p>3、修改完成需要前后端再次连调测试，按照测试人员提交的测试流程重新进行测试，测试通过将此bug置为已解决。</p>
<h4 id="系统的异常是怎么处理的？"><a href="#系统的异常是怎么处理的？" class="headerlink" title="系统的异常是怎么处理的？"></a>系统的异常是怎么处理的？</h4><p>系统对异常的处理使用统一的异常处理流程。</p>
<p><img src="https://img-blog.csdnimg.cn/20200807185218259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk1MDk4Nw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p>1、在服务层抛出自定义异常类型及不可预知异常类型。</p>
<p>上图中 <strong><code>BusinessException</code></strong> 为系统的自定义异常类型，程序中在代码显示抛出该异常，此类异常是程序员可预知的。</p>
<p>另一部分是系统无法预知的异常，如：数据库无法连接，服务器宕机等场景下所抛出的异常，此类异常是程序员无法预知的异常。</p>
<p>2、应用层接收到服务层抛出异常继续向上抛出，应用层自己也可以抛出自定义异常类型及不可预知异常类型。</p>
<p>3、统一异常处理器捕获到异常进行解析。</p>
<p>判断如果为自定义异常则直接取出错误代码及错误信息，因为程序员在抛出自定义异常时已将错误代码和异常信息指定。</p>
<p>如果为不可预知的异常则统一定义为99999异常代码。</p>
<p>4、统一异常处理器将异常信息格式为前端要求的格式响应给前端。</p>
<p>服务端统一将异常信息封装在下边的Json格式中返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span> <br>	<span class="hljs-attr">&quot;errCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;000000&quot;</span><span class="hljs-punctuation">,</span><br>	<span class="hljs-attr">&quot;errMessage&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;错误说明&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>








            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/05/07/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/">
                        <span class="hidden-mobile">SpringBoot面试题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"kxuG7mjg9gVQgrv1i9UIzeQR-gzGzoHsz","appKey":"VeVOnPRwIu2WTgwycIlFxdLy","path":"window.location.pathname","placeholder":"说点什么","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud 统计PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            总访问量 
            <span id="leancloud-site-pv"></span>
             次
          </span>
      
      
        <!-- LeanCloud 统计UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            总访客数 
            <span id="leancloud-site-uv"></span>
             人
          </span>
      

    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  




  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
